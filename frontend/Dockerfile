FROM node:16.16.0-alpine as development

ARG VUE_APP_URL_API_IP=192.168.192.26
ARG VUE_APP_URL_API_PORT=5200
ARG VUE_APP_URL_WEBSOCKET_IP=192.168.192.26
ARG VUE_APP_URL_WEBSOCKET_PORT=5200

ENV VUE_APP_URL_API_IP $VUE_APP_URL_API_IP
ENV VUE_APP_URL_API_PORT $VUE_APP_URL_API_PORT
ENV VUE_APP_URL_WEBSOCKET_IP $VUE_APP_URL_WEBSOCKET_IP
ENV VUE_APP_URL_WEBSOCKET_PORT $VUE_APP_URL_WEBSOCKET_PORT

WORKDIR '/app'
COPY package*.json .
RUN npm ci
COPY . .

RUN npm run build

ENTRYPOINT ["npm", "run"]

CMD ["development"]

